<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basketball Metrics - Data Dunkers</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 2%;
        }
    </style>
</head>
<body>

    <!-- Top Banner -->
    <img src="https://github.com/Data-Dunkers/lessons/blob/main/images/top-banner.jpg?raw=true" alt="Data Dunkers Banner" style="width:100%; max-width:1200px;">

    <h2>Basketball Metrics: Efficiency & True Shooting</h2>
    
    <p>
        In this lesson, we move beyond basic stats like Points Per Game (PPG) to understand how efficient players really are. 
        We will explore two key advanced metrics: <strong>Efficiency (EFF)</strong>, which gives a holistic view of a player's contribution, 
        and <strong>True Shooting Percentage (TS%)</strong>, which accurately measures shooting performance by accounting for 3-pointers and free throws.
    </p>

    <!-- Embedding the visualization -->
    <!-- Note: Typically we would export the plotly figure to HTML and embed it here. 
         Since we are generating this page statically, we will use a placeholder or link 
         until the notebook is run and the visualization is exported. -->
    <iframe src="visualizations/metrics_scatter.html" width="100%" height="600px" style="border:none;"></iframe>

    <p>
        <strong>How to read this chart:</strong> 
        The X-axis shows Points Per Game (Volume), and the Y-axis shows True Shooting % (Efficiency). 
        Top-right players are superstarsâ€”high volume and high efficiency. 
        Players above the green dashed line are elite shooters.
    </p>

    <h3>Critical Thinking</h3>
    <div id="questions"></div>
    <button onclick="copyAnswers()">Copy Answers to Clipboard</button>

    <script>
        const questions = [
            "Why is True Shooting % (TS%) a fairer way to compare a center (who mostly dunks) and a guard (who shoots 3s)?",
            "The Efficiency formula is: (PTS + REB + AST + STL + BLK) - (Missed FG + Missed FT + TO). What is one major flaw with this stat?",
            "If a player scores 30 points but takes 30 shots to do it, would they have a high or low TS%?"
        ];

        const questionsContainer = document.getElementById('questions');
        const storageKey = 'basketballMetricsAnswers';

        // Load saved answers
        const savedAnswers = JSON.parse(localStorage.getItem(storageKey)) || {};

        questions.forEach((q, index) => {
            const label = document.createElement('label');
            label.innerText = q;
            label.style.display = 'block';
            label.style.marginTop = '10px';
            label.style.fontWeight = 'bold';

            const input = document.createElement('textarea');
            input.style.width = '100%';
            input.style.height = '60px';
            input.id = `q${index}`;
            input.value = savedAnswers[`q${index}`] || '';
            input.addEventListener('input', () => {
                savedAnswers[`q${index}`] = input.value;
                localStorage.setItem(storageKey, JSON.stringify(savedAnswers));
            });

            questionsContainer.appendChild(label);
            questionsContainer.appendChild(input);
        });

        function copyAnswers() {
            let text = "";
            questions.forEach((q, index) => {
                text += `Q: ${q}\nA: ${document.getElementById(`q${index}`).value}\n\n`;
            });
            navigator.clipboard.writeText(text).then(() => {
                alert("Answers copied to clipboard!");
            });
        }
    </script>
    
    <br><br>

    <!-- Navigation -->
    <p>
        <a href="https://github.com/Data-Dunkers/student/blob/main/activities/basketball-metrics.ipynb" target="_blank">View Notebook on GitHub</a> | 
        <a href="https://colab.research.google.com/github/Data-Dunkers/student/blob/main/activities/basketball-metrics.ipynb" target="_blank">Open in Google Colab</a> | 
        <a href="https://hub.callysto.ca/jupyter/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2FData-Dunkers%2Fstudent&branch=main&subPath=activities/basketball-metrics.ipynb&depth=1" target="_blank">Open in Callysto Hub</a>
    </p>

    <footer>
        <hr>
        <p>
            <a href="index.html">Home</a> | 
            <a href="standard-deviation.html">Next Lesson: Standard Deviation</a>
        </p>
        <img src="https://github.com/Data-Dunkers/lessons/blob/main/images/bottom-banner.jpg?raw=true" alt="Data Dunkers Footer" style="width:100%; max-width:1200px;">
    </footer>

</body>
</html>
