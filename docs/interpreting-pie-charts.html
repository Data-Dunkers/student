<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="RSD 5.0.3490" />
    <title>Data Dunkers Visualizations - Interpreting Pie Charts</title>
    <style>
      body {
        font-family: sans-serif;
        margin-left: 2%;
        margin-right: 2%;
      }
      .viz-container {
        margin-bottom: 30px;
      }
    </style>
  </head>

  <body>
    <img
      src="https://github.com/Data-Dunkers/lessons/blob/main/images/top-banner.jpg?raw=true"
      alt="Data Dunkers Banner"
      style="width: 50%; height: auto; display: block; margin: 0 auto"
    />
    <h2>Interpreting Pie Charts</h2>
    <p class="paragraph">
      Pie charts are used to show parts of a whole. In these visualizations, we look at individual player contributions to the Indiana Pacers' total points, and then dive deeper into how a single player, Pascal Siakam, scores his points.
    </p>

    <div class="viz-container">
      <h3>Points Per Game: Pacers 2024-2025</h3>
      <iframe
        src="visualizations/interpreting_pie_charts_pts.html"
        style="width: 100%; height: 500px; border: none"
      ></iframe>
    </div>

    <div class="viz-container">
      <h3>Pascal Siakam's Scoring Breakdown</h3>
      <iframe
        src="visualizations/interpreting_pie_charts_siakam.html"
        style="width: 100%; height: 500px; border: none"
      ></iframe>
    </div>

    <p class="paragraph">
      You can hover over slices to see exact values and percentages. Clicking a name in the legend will hide or show that slice, recalculating the percentages of the remaining parts.
    </p>

    <footer>
      <h3>Questions</h3>
      <p class="questions" id="questions"></p>
      <p style="text-align: center">
        <button
          onclick="copyAnswers()"
          style="padding: 10px 20px; margin-top: 10px"
        >
          Copy Answers
        </button>
      </p>
      <p id="gitpullParagraph"></p>
      <p style="text-align: center"><a href="index.html">home</a></p>
      <img
        src="https://github.com/Data-Dunkers/lessons/blob/main/images/bottom-banner.jpg?raw=true"
        alt="Data Dunkers Bottom Banner"
        style="width: 50%; height: auto; display: block; margin: 0 auto"
      />
    </footer>

    <script>
      const questions = [
        "In the first visualization, how large is Pascal Siakam's slice compared to his teammates?",
        "What type of shots contribute the most to Pascal Siakam's total points?",
        "Does this type of visual representation make it easier to compare elements in the data? Why or why not?",
      ];
      const githubUrl =
        "https://github.com/Data-Dunkers/student/blob/main/activities/interpreting-pie-charts.ipynb";

      function gitpullLinks(githubUrl) {
        var colabUrl =
          "https://colab.research.google.com/github/" +
          githubUrl.split("github.com/")[1];
        var res = githubUrl.split("/");
        var site = res[2];
        var user = res[3];
        var repo = res[4];
        var treeBlob = res[5];
        var branch = res[6];
        var callystoUrl =
          "https://hub.callysto.ca/jupyter/hub/user-redirect/git-pull?repo=";
        if (site == "github.com") {
          if (treeBlob) {
            var subPath = githubUrl.substring(
              githubUrl.indexOf(branch) + branch.length + 1,
            );
            callystoUrl +=
              encodeURIComponent("https://github.com/" + user + "/") +
              repo +
              "&branch=" +
              branch +
              "&subPath=" +
              subPath +
              "&depth=1";
          } else {
            callystoUrl += githubUrl;
          }
        }
        var parag = `<p>Check out the <a href="${githubUrl}">notebook</a> that generated this visualization in <a href="${colabUrl}"> Colab</a> or the <a href="${callystoUrl}">Callysto Hub</a>.</p>`;
        return parag;
      }

      // insert the gitpull links
      try {
        document.getElementById("gitpullParagraph").innerHTML =
          gitpullLinks(githubUrl);
      } catch (error) {
        console.error("Error:", error);
      }

      // add the questions
      questions.forEach((question, index) => {
        const questionHTML = `<label for="question${index + 1}">${index + 1}. ${question}</label><br>
                          <input type="text" style="width:80%; padding:5px; margin:10px 0;" id="question${index + 1}"><br>`;
        document
          .getElementById("questions")
          .insertAdjacentHTML("beforeend", questionHTML);
      });

      const fileName = window.location.pathname.split("/").pop().split(".")[0];

      const savedAnswers = JSON.parse(
        localStorage.getItem(fileName + "Answers"),
      );
      if (savedAnswers) {
        questions.forEach((_, index) => {
          const input = document.getElementById(`question${index + 1}`);
          if (input && savedAnswers[`question${index + 1}`]) {
            input.value = savedAnswers[`question${index + 1}`];
          }
        });
      }

      function saveAnswers() {
        const answers = {};
        questions.forEach((_, index) => {
          answers[`question${index + 1}`] = document.getElementById(
            `question${index + 1}`,
          ).value;
        });
        localStorage.setItem(fileName + "Answers", JSON.stringify(answers));
        console.log("Answers saved.");
      }

      function debounce(fn, delay) {
        let timerId;
        return (...args) => {
          clearTimeout(timerId);
          timerId = setTimeout(() => fn(...args), delay);
        };
      }

      const saveAnswersDebounced = debounce(saveAnswers, 200);
      document
        .getElementById("questions")
        .addEventListener("input", (event) => {
          if (event.target.matches('input[type="text"]')) {
            saveAnswersDebounced();
          }
        });

      function copyAnswers() {
        const answerText = questions
          .map((questionText, index) => {
            const answer = document.getElementById(
              `question${index + 1}`,
            ).value;
            return `${index + 1}. ${questionText}\nAnswer: ${answer}\n`;
          })
          .join("\n");

        navigator.clipboard.writeText(answerText).then(
          () => {
            alert("Answers have been copied to your clipboard");
          },
          () => {
            alert("Failed to copy answers");
          },
        );
      }
    </script>
  </body>
</html>
