<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="RSD 5.0.3490">
  <title>Data Dunkers Visualizations - Interpreting Scatterplots</title>
  <style>
    body {
      font-family: sans-serif;
      margin-left: 2%;
      margin-right: 2%;
    }
  </style>
</head>

<body>
  <img src="https://github.com/Data-Dunkers/lessons/blob/main/images/top-banner.jpg?raw=true" alt="Data Dunkers Banner" style="width:50%; height:auto; display:block; margin:0 auto;">
  <h2>Data Visualizations</h2>
  <p class="paragraph">Visualizations help you see relationships and trends in the data. This is a <a href="https://en.wikipedia.org/wiki/Scatter_plot">scatterplot</a> that shows how NBA players' field goal percentages relate to the points they scored. The data are from the 2024-2025 season.</p>
  
  <div id="visualization-container">
    <iframe src="field_goal_percentage_vs_points.html" style="width:100%; height:800px; border:none;"></iframe>
  </div>

  <p class="paragraph">Hover over different points to see player names and statistics. Identify some players that <b>stand out</b> from the rest (<a href="https://en.wikipedia.org/wiki/Outlier">outliers</a>).</p>

  <footer>
    <h3>Questions</h3><p class="questions" id="questions"></p>
    <p style="text-align: center;"><button onclick="copyAnswers()" style="padding:10px 20px; margin-top:10px;">Copy Answers</button></p>
    <p style="text-align:center;"><a href="index.html">home</a> | <a href="visualization2.html">next</a></p>
    <img src="https://github.com/Data-Dunkers/lessons/blob/main/images/bottom-banner.jpg?raw=true" alt="Data Dunkers Bottom Banner" style="width:50%; height:auto; display:block; margin:0 auto;">
  </footer>

<script>
  const questions = [
    "Name one player who stands out in this visualization.",
    "Why do you think this player is an outlier?",
    "If you were the coach, what questions would you ask about this player?"
  ];

  questions.forEach((question, index) => {
    const questionHTML = `<label for="question${index + 1}">${index+1}. ${question}</label><br>
                          <input type="text" style="width:80%; padding:5px; margin:10px 0;" id="question${index + 1}"><br>`;
    document.getElementById('questions').insertAdjacentHTML('beforeend', questionHTML);
  });

  const fileName = window.location.pathname.split('/').pop().split('.')[0];

  const savedAnswers = JSON.parse(localStorage.getItem(fileName + 'Answers'));
  if (savedAnswers) {
      document.getElementById('question1').value = savedAnswers.question1 || '';
      document.getElementById('question2').value = savedAnswers.question2 || '';
      document.getElementById('question3').value = savedAnswers.question3 || '';
  }

  function saveAnswers() {
      const answers = {
          question1: document.getElementById('question1').value,
          question2: document.getElementById('question2').value,
          question3: document.getElementById('question3').value
      };
      localStorage.setItem('visualization1Answers', JSON.stringify(answers));
      console.log('Answers saved.');
  }

  function debounce(fn, delay) {
    let timerId;
    return (...args) => {
      clearTimeout(timerId);
      timerId = setTimeout(() => fn(...args), delay);
    };
  }

  const saveAnswersDebounced = debounce(saveAnswers, 200);
  document.getElementById('questions').addEventListener('input', (event) => {
    if (event.target.matches('input[type="text"]')) {
      saveAnswersDebounced();
    }
  });

  function copyAnswers() {
      const answers = [
          document.getElementById('question1').value,
          document.getElementById('question2').value,
          document.getElementById('question3').value
      ];
      const answerText = questions.map((questionText, questionNumber) => `${questionNumber + 1}. ${questionText}\nAnswer: ${answers[questionNumber]}\n`).join('\n');
      
      navigator.clipboard.writeText(answerText).then(() => {
          alert('Answers have been copied to your clipboard');
      }, () => {
          alert('Failed to copy answers');
      });
  }
</script>
</body>
</html>
