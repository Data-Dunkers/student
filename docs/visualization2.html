<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="RSD 5.0.3490">
  <title>Data Dunkers Visualizations - Interpreting Shot Charts</title>
  <style>
    body {
      font-family: sans-serif;
      margin-left: 2%;
      margin-right: 2%;
    }
  </style>
</head>

<body>
  <img src="https://github.com/Data-Dunkers/lessons/blob/main/images/top-banner.jpg?raw=true" alt="Data Dunkers Banner" style="width:50%; height:auto; display:block; margin:0 auto;">
  <h2>Shot Charts</h2>
  <p class="paragraph">Basketball shot charts show where players take their shots on the court and how successful they were. This visualization helps you understand players' shooting patterns and effectiveness.</p>
  
  <div id="visualization-container">
    <iframe src="shot_chart.html" style="width:100%; height:1120px; border:none;"></iframe>
  </div>

  <p class="paragraph">You can hover over points to see player names and other information. Click or double-click on the shot types in the legend to filter the data.</p>

<footer>
    <h3>Questions</h3><p class="questions" id="questions"></p>
    <p style="text-align: center;"><button onclick="copyAnswers()" style="padding:10px 20px; margin-top:10px;">Copy Answers</button></p>
    <p style="text-align:center;"><a href="index.html">home</a> | <a href="visualization2.html">next</a></p>
    <img src="https://github.com/Data-Dunkers/lessons/blob/main/images/bottom-banner.jpg?raw=true" alt="Data Dunkers Bottom Banner" style="width:50%; height:auto; display:block; margin:0 auto;">
  </footer>

<script>
  const questions = [
    "What do you notice about the shooting patterns?",
    "Are there areas on the court where players tend to shoot more or less?",
    "How might this information be useful for coaches and players?"
  ];

  questions.forEach((question, index) => {
    const questionHTML = `<label for="question${index + 1}">${index+1}. ${question}</label><br>
                          <input type="text" style="width:80%; padding:5px; margin:10px 0;" id="question${index + 1}"><br>`;
    document.getElementById('questions').insertAdjacentHTML('beforeend', questionHTML);
  });

  const fileName = window.location.pathname.split('/').pop().split('.')[0];

  const savedAnswers = JSON.parse(localStorage.getItem(fileName + 'Answers'));
  if (savedAnswers) {
      document.getElementById('question1').value = savedAnswers.question1 || '';
      document.getElementById('question2').value = savedAnswers.question2 || '';
      document.getElementById('question3').value = savedAnswers.question3 || '';
  }

  function saveAnswers() {
      const answers = {
          question1: document.getElementById('question1').value,
          question2: document.getElementById('question2').value,
          question3: document.getElementById('question3').value
      };
      localStorage.setItem('visualization1Answers', JSON.stringify(answers));
      console.log('Answers saved.');
  }

  function debounce(fn, delay) {
    let timerId;
    return (...args) => {
      clearTimeout(timerId);
      timerId = setTimeout(() => fn(...args), delay);
    };
  }

  const saveAnswersDebounced = debounce(saveAnswers, 200);
  document.getElementById('questions').addEventListener('input', (event) => {
    if (event.target.matches('input[type="text"]')) {
      saveAnswersDebounced();
    }
  });

  function copyAnswers() {
      const answers = [
          document.getElementById('question1').value,
          document.getElementById('question2').value,
          document.getElementById('question3').value
      ];
      const answerText = questions.map((questionText, questionNumber) => `${questionNumber + 1}. ${questionText}\nAnswer: ${answers[questionNumber]}\n`).join('\n');
      
      navigator.clipboard.writeText(answerText).then(() => {
          alert('Answers have been copied to your clipboard');
      }, () => {
          alert('Failed to copy answers');
      });
  }
</script>
</body>
</html>
